<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>天堂 - BOSS時間</title>
  <link rel="stylesheet" href="./editor.css" />
  <script type="module" src="./index.js"></script>
  <style>
  /* 桌機維持你現在的排版（每欄20張、往右延伸） */
    :root{
      --border:#e5e7eb;
      --muted:#6b7280;
      --red:#fee2e2;
      --green:#dcfce7;
      --yellow:#fef9c3;
      --card-bg:#ffffff;
    }
    *{ box-sizing:border-box }
    body{
      margin:0;
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"PingFang TC","Microsoft JhengHei",sans-serif;
      color:#111; background:#fafafa;
    }
    header{
      position:sticky; top:0; z-index:10;
      background:#ffffffcc; backdrop-filter:saturate(140%) blur(6px);
      border-bottom:1px solid var(--border);
    }
    .container{ max-width:900px; margin:0 auto; padding:12px 16px }
    h1{ margin:0 0 8px; font-size:20px }
    .meta{ color:var(--muted); font-size:12px }
        
/* 讓前端顯示也固定每欄 20 張（由上到下，再往右） */
.list{
  display: grid;
  grid-auto-flow: column;            /* 先填滿列（rows），再換欄 */
  grid-template-rows: repeat(20, 35px); /* ← 固定 20 列，每列高 35px（=卡片高） */
  grid-auto-columns: 185px;          /* 每一欄寬度固定 185px（=卡片寬） */
  gap: 8px;

  /* 捲動與對齊 */
  overflow-x: auto;
  overflow-y: hidden;
  justify-content: start;
  align-content: start;

  margin-top: 12px;
  padding-bottom: 4px;
}

/* 卡片與匯出一致的尺寸 */
.card{
  width: 185px;
  height: 35px;
  padding: 5px 6px;
  display: flex; align-items: center; justify-content: space-between;
  border: 1px solid var(--border);
  border-radius: 5px;
  background: var(--card-bg);
  box-sizing: border-box;
  margin: 0;                         /* 避免影響格線 */
}

    .card .name{
      font-weight: 600;
      font-size: 16px;
      line-height: 1.2;
      flex: 1;
      word-break: break-word;
    }
    .card .time{
      font-variant-numeric: tabular-nums;
      font-size: 14px;
      color: #374151;
      white-space: nowrap;
      margin-left: 8px;
      flex-shrink: 0;
    }

    .name{ font-weight:600; line-height:1.2; margin-bottom:6px; word-break:break-word }
    .time{ font-variant-numeric:tabular-nums; color:#374151 }
    .status-green{ background: var(--green); }
    .status-red{ background: var(--red); }
    .status-yellow{ background: var(--yellow); }

    .legend{ display:flex; gap:10px; align-items:center; color:var(--muted); font-size:12px; }
    .chip{ display:inline-block; padding:2px 8px; border-radius:999px; border:1px solid var(--border) }
    .chip.red{ background:var(--red) }
    .chip.green{ background:var(--green) }
    .chip.yellow{ background:var(--yellow) }

    /* 匯出時加白底 */
    .exporting { background:#fff !important; }
    
    /* 匯出用臨時容器：多欄直向 + 固定卡片尺寸 */
.export-grid-dynamic{
  position: fixed; left: -200vw; top: 0;   /* 螢幕外，避免閃爍 */
  background: #fff;
  display: grid;
  gap: 4px;
}
.export-grid-dynamic .card{
  margin: 0;
  width: 185px;
  height: 30px;
}

  </style>

  <!-- html2canvas（DOM 轉成圖片） -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js" defer></script>
  <!-- 引入 JS -->
  
</head>
<body>
  <header>
    <div class="container">
      <div class="toolbar">
        <button class="btn" id="reload">重新讀取</button>
        <a id="link-name" class="btn">編輯排序</a>
        <a id="link-time" class="btn">編輯時間</a>
        <button id="download-cards">匯出BOSS時間圖表</button>
        <div class="legend" style="margin-left:8px">
          <span class="chip green">存活</span>
          <span class="chip red">超時</span>
          <span class="chip yellow">即將重生</span>
        </div>
        <br><span id="meta" class="meta" aria-live="polite"></span>
      </div>
    </div>
  </header>
  <main class="container">
    <div id="list" class="list" aria-live="polite"></div>
  </main>
</body>
</html>
