<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>展示頁 · data.json</title>
  <style>
    :root{
      --border:#e5e7eb;
      --muted:#6b7280;
      --red:#fee2e2;
      --green:#dcfce7;
      --yellow:#fef9c3;
      --card-bg:#ffffff;
    }
    *{ box-sizing:border-box }
    body{
      margin:0;
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"PingFang TC","Microsoft JhengHei",sans-serif;
      color:#111; background:#fafafa;
    }
    header{
      position:sticky; top:0; z-index:10;
      background:#ffffffcc; backdrop-filter:saturate(140%) blur(6px);
      border-bottom:1px solid var(--border);
    }
    .container{ max-width:900px; margin:0 auto; padding:12px 16px }
    h1{ margin:0 0 8px; font-size:20px }
    .meta{ color:var(--muted); font-size:12px }
    .toolbar{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-top:6px }
    button, .btn{
      padding:8px 10px; border:1px solid var(--border);
      border-radius:10px; background:#fff; color:#111; text-decoration:none; display:inline-block; cursor:pointer;
    }

    
/* === 卡片容器：每欄固定 20 張，橫向捲動 === */
.list{
  /* 改成 Grid；先排滿一欄再換下一欄 */
  display: grid;
  grid-auto-flow: column;
  grid-auto-rows: 35px;                 /* 每張卡片固定高度：35px */
  grid-template-columns: repeat(auto-fill, 190px); /* 卡片寬 190px */
  gap: 8px;

  /* 固定容器高度 = 20 張卡片 + 19 個間距 */
  max-height: calc(35px * 20 + 8px * 19); /* = 852px */
  height: calc(35px * 20 + 8px * 19);

  /* 讓多出來的欄位往右延伸，橫向捲動 */
  overflow-x: auto;
  overflow-y: hidden;

  justify-content: start;
  align-items: start;
  margin-top: 12px;
  padding-bottom: 4px; /* 捲動時底部留一點緩衝，可依喜好調整 */
}

/* 卡片尺寸保持固定（對齊匯出設定） */
.card{
  width: 190px;
  height: 35px;
  padding: 5px 6px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border: 1px solid var(--border);
  border-radius: 5px;
  background: var(--card-bg);
  box-sizing: border-box;
}

    .card .name{
      font-weight: 600;
      font-size: 16px;
      line-height: 1.2;
      flex: 1;
      word-break: break-word;
    }
    .card .time{
      font-variant-numeric: tabular-nums;
      font-size: 14px;
      color: #374151;
      white-space: nowrap;
      margin-left: 8px;
      flex-shrink: 0;
    }

    .name{ font-weight:600; line-height:1.2; margin-bottom:6px; word-break:break-word }
    .time{ font-variant-numeric:tabular-nums; color:#374151 }
    .status-green{ background: var(--green); }
    .status-red{ background: var(--red); }
    .status-yellow{ background: var(--yellow); }

    .legend{ display:flex; gap:10px; align-items:center; color:var(--muted); font-size:12px; }
    .chip{ display:inline-block; padding:2px 8px; border-radius:999px; border:1px solid var(--border) }
    .chip.red{ background:var(--red) }
    .chip.green{ background:var(--green) }
    .chip.yellow{ background:var(--yellow) }

    /* 匯出時加白底 */
    .exporting { background:#fff !important; }

    /* 匯出 PNG（卡片）：直向排序 + 多欄支援 */
    .export-vertical {
      display: flex !important;
      flex-direction: column;
      gap: 5px;
      justify-content: flex-start;
      align-items: flex-start;
      width: max-content;
      background: #fff;
    }
    .export-vertical .card {
      margin: 0;
      width: 185px;
      height: 30px;
    }
    
    /* 匯出用臨時容器：多欄直向 + 固定卡片尺寸 */
.export-grid-dynamic{
  position: fixed; left: -200vw; top: 0;   /* 螢幕外，避免閃爍 */
  background: #fff;
  display: grid;
  gap: 4px;
}
.export-grid-dynamic .card{
  margin: 0;
  width: 185px;
  height: 30px;
}

    /* 表格匯出樣式（匯出時動態掛在暫存節點上） */
    .export-table-wrap{
      position: fixed; left: -200vw; top: 0;
      background: #fff;
      padding: 6px;
      border: 1px solid var(--border);
    }
    .export-table{
      border-collapse: collapse;
      table-layout: fixed;
      background:#fff;
    }
    .export-table td{
      width: 150px;
      height: 20px;
      border: 1px solid var(--border);
      vertical-align: middle;
      text-align: center;
      padding: 6px 4px;
      font-size: 14px;
    }
    .export-table .cell-name{
      display:block; font-weight:600; margin-bottom:4px; word-break:break-word;
    }
    .export-table .cell-time{
      display:block; font-variant-numeric:tabular-nums; color:#374151;
    }
    .export-green{ background: var(--green); }
    .export-red{ background: var(--red); }
    .export-yellow{ background: var(--yellow); }
  </style>

  <!-- html2canvas（DOM 轉成圖片） -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js" defer></script>
  <!-- 引入 JS -->
  <script src="./index.js" defer></script>
</head>
<body>
  <header>
    <div class="container">
      <h1>展示頁</h1>
      <div class="toolbar">
        <button id="reload">重新讀取</button>
        <a class="btn" href="./name.html">編輯排序（name.html）</a>
        <a class="btn" href="./time.html">編輯時間（time.html）</a>
        <button id="download-cards">下載 PNG（卡片）</button>
        <button id="download-table">下載 PNG（表格）</button>
        <div class="legend" style="margin-left:8px">
          <span class="chip green">已重生</span>
          <span class="chip red">今天已過去</span>
          <span class="chip yellow">未來中最接近現在</span>
        </div>
        <span id="meta" class="meta" aria-live="polite" style="margin-left:auto"></span>
      </div>
    </div>
  </header>
  <main class="container">
    <div id="list" class="list" aria-live="polite"></div>
  </main>
</body>
</html>